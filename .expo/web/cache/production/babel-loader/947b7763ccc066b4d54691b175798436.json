{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";var _excluded=[\"children\"],_excluded2=[\"defaultValue\",\"keepWithinRange\",\"value\",\"min\",\"max\",\"onChange\"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import React from'react';import{useThemeProps}from\"../../../hooks\";import{useFormControlContext}from\"../FormControl\";import{NumberInputContext}from\"./Context\";import Box from\"../../primitives/Box\";import{useHasResponsiveProps}from\"../../../hooks/useHasResponsiveProps\";var NumberInput=function NumberInput(_ref,ref){var children=_ref.children,props=_objectWithoutProperties(_ref,_excluded);var _useThemeProps=useThemeProps('NumberInput',props),defaultValue=_useThemeProps.defaultValue,keepWithinRange=_useThemeProps.keepWithinRange,value=_useThemeProps.value,min=_useThemeProps.min,max=_useThemeProps.max,onChange=_useThemeProps.onChange,newProps=_objectWithoutProperties(_useThemeProps,_excluded2);var formControlContext=useFormControlContext();var _React$useState=React.useState(parseInt(value||defaultValue,10)),_React$useState2=_slicedToArray(_React$useState,2),numberInputValue=_React$useState2[0],setNumberInputValue=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),numberInputStepper=_React$useState4[0],setNumberInputStepper=_React$useState4[1];var handleChange=function handleChange(newValue){var temp=newValue;setNumberInputValue(temp);if(keepWithinRange){if(newValue<min)setNumberInputValue(min);else if(newValue>max)setNumberInputValue(max);}onChange&&onChange(temp);};var handleChangeWithoutCheck=function handleChangeWithoutCheck(newValue){var temp=newValue;setNumberInputValue(temp);};React.useEffect(function(){if(value!==undefined&&value!=numberInputValue)setNumberInputValue(value);},[value,numberInputValue,setNumberInputValue]);if(useHasResponsiveProps(props)){return null;}return React.createElement(Box,{ref:ref},React.createElement(NumberInputContext.Provider,{value:_objectSpread(_objectSpread(_objectSpread({},formControlContext),newProps),{},{min:min,max:max,handleChange:handleChange,handleChangeWithoutCheck:handleChangeWithoutCheck,numberInputValue:numberInputValue,numberInputStepper:numberInputStepper,setNumberInputStepper:setNumberInputStepper,isControlled:value!==undefined})},children));};export default React.memo(React.forwardRef(NumberInput));","map":{"version":3,"sources":["NumberInput.tsx"],"names":["NumberInput","props","newProps","useThemeProps","formControlContext","useFormControlContext","React","parseInt","value","handleChange","newValue","temp","setNumberInputValue","onChange","handleChangeWithoutCheck","useHasResponsiveProps","ref","min","max","numberInputValue","numberInputStepper","setNumberInputStepper","isControlled","undefined"],"mappings":"skCAAA,MAAA,CAAA,KAAA,KAAA,OAAA,CACA,OAAA,aAAA,sBACA,OAAA,qBAAA,sBAEA,OAAA,kBAAA,iBACA,MAAA,CAAA,GAAA,4BACA,OAAA,qBAAA,4CAEA,GAAMA,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAAA,GAAA,CAA0D,IAAzD,CAAA,QAAyD,MAAzD,QAAyD,CAA1CC,KAA0C,0CAC5E,mBAQIE,aAAa,CAAA,aAAA,CARjB,KAQiB,CARjB,CAAM,YAAN,gBAAM,YAAN,CAAM,eAAN,gBAAM,eAAN,CAAM,KAAN,gBAAM,KAAN,CAAM,GAAN,gBAAM,GAAN,CAAM,GAAN,gBAAM,GAAN,CAAM,QAAN,gBAAM,QAAN,CAOKD,QAPL,qDASA,GAAME,CAAAA,kBAAkB,CAAGC,qBAA3B,EAAA,CAEA,oBAAgDC,KAAK,CAALA,QAAAA,CAC9CC,QAAQ,CAACC,KAAK,EAAN,YAAA,CADV,EACU,CADsCF,CAAhD,oDAAM,gBAAN,qBAAM,mBAAN,qBAGA,qBAAoDA,KAAK,CAALA,QAAAA,CAApD,IAAoDA,CAApD,qDAAM,kBAAN,qBAAM,qBAAN,qBACA,GAAMG,CAAAA,YAAY,CAAIC,QAAhBD,CAAAA,YAAgBC,CAAAA,QAAD,CAAsB,CACzC,GAAMC,CAAAA,IAAI,CAAV,QAAA,CACAC,mBAAmB,CAAnBA,IAAmB,CAAnBA,CACA,GAAA,eAAA,CAAqB,CACnB,GAAIF,QAAQ,CAAZ,GAAA,CAAoBE,mBAAmB,CAAvC,GAAuC,CAAnBA,CAApB,IACK,IAAIF,QAAQ,CAAZ,GAAA,CAAoBE,mBAAmB,CAAnBA,GAAmB,CAAnBA,CALc,CAQzCC,QAAQ,EAAIA,QAAQ,CAApBA,IAAoB,CAApBA,CARF,CAAA,CAUA,GAAMC,CAAAA,wBAAwB,CAAIJ,QAA5BI,CAAAA,wBAA4BJ,CAAAA,QAAD,CAAsB,CACrD,GAAMC,CAAAA,IAAI,CAAV,QAAA,CACAC,mBAAmB,CAAnBA,IAAmB,CAAnBA,CAFF,CAAA,CAKAN,KAAK,CAALA,SAAAA,CAAgB,UAAM,CACpB,GAAIE,KAAK,GAALA,SAAAA,EAAuBA,KAAK,EAAhC,gBAAA,CACEI,mBAAmB,CAAnBA,KAAmB,CAAnBA,CAFJN,CAAAA,CAGG,CAAA,KAAA,CAAA,gBAAA,CAlCyE,mBAkCzE,CAHHA,EAKA,GAAIS,qBAAqB,CAAzB,KAAyB,CAAzB,CAAkC,CAChC,MAAA,KAAA,CACD,CACD,MACE,CAAA,KAAA,CAAA,aAAA,CAAA,GAAA,CAAA,CAAK,GAAG,CAAEC,GAAV,CAAA,CACE,KAAA,CAAA,aAAA,CAAC,kBAAD,CAAA,QAAA,CAAA,CACE,KAAK,8CAAE,kBAAF,EAAE,QAAF,MAGHC,GAHK,CAGLA,GAHG,CAIHC,GAJK,CAILA,GAJG,CAKHT,YALK,CAKLA,YALG,CAMHK,wBANK,CAMLA,wBANG,CAOHK,gBAPK,CAOLA,gBAPG,CAQHC,kBARK,CAQLA,kBARG,CASHC,qBATK,CASLA,qBATG,CAUHC,YAAY,CAAEd,KAAK,GAAKe,SAVrB,EADP,CAAA,CAFJ,QAEI,CADF,CADF,CAvCF,CAAA,CA6DA,cAAejB,CAAAA,KAAK,CAALA,IAAAA,CAAWA,KAAK,CAALA,UAAAA,CAA1B,WAA0BA,CAAXA,CAAf","sourcesContent":["import React from 'react';\nimport { useThemeProps } from '../../../hooks';\nimport { useFormControlContext } from '../FormControl';\nimport type { INumberInputProps } from './types';\nimport { NumberInputContext } from './Context';\nimport Box from '../../primitives/Box';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\n\nconst NumberInput = ({ children, ...props }: INumberInputProps, ref?: any) => {\n  const {\n    defaultValue,\n    keepWithinRange,\n    value,\n    min,\n    max,\n    onChange,\n    ...newProps\n  } = useThemeProps('NumberInput', props);\n  const formControlContext = useFormControlContext();\n\n  const [numberInputValue, setNumberInputValue] = React.useState(\n    parseInt(value || defaultValue, 10)\n  );\n  const [numberInputStepper, setNumberInputStepper] = React.useState(null);\n  const handleChange = (newValue: number) => {\n    const temp = newValue;\n    setNumberInputValue(temp);\n    if (keepWithinRange) {\n      if (newValue < min) setNumberInputValue(min);\n      else if (newValue > max) setNumberInputValue(max);\n    }\n    //NOTE: only calling onChange on stepper click or blur event of input.\n    onChange && onChange(temp);\n  };\n  const handleChangeWithoutCheck = (newValue: number) => {\n    const temp = newValue;\n    setNumberInputValue(temp);\n  };\n\n  React.useEffect(() => {\n    if (value !== undefined && value != numberInputValue)\n      setNumberInputValue(value);\n  }, [value, numberInputValue, setNumberInputValue]);\n  //TODO: refactor for responsive prop\n  if (useHasResponsiveProps(props)) {\n    return null;\n  }\n  return (\n    <Box ref={ref}>\n      <NumberInputContext.Provider\n        value={{\n          ...formControlContext,\n          ...newProps,\n          min,\n          max,\n          handleChange,\n          handleChangeWithoutCheck,\n          numberInputValue,\n          numberInputStepper,\n          setNumberInputStepper,\n          isControlled: value !== undefined,\n        }}\n      >\n        {children}\n      </NumberInputContext.Provider>\n    </Box>\n  );\n};\n\nexport default React.memo(React.forwardRef(NumberInput));\n"]},"metadata":{},"sourceType":"module"}