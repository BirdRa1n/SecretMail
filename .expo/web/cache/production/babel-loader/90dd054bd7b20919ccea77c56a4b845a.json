{"ast":null,"code":"import _extends2 from\"@babel/runtime/helpers/extends\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";var _excluded=[\"isDisabled\",\"isReadOnly\"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}import React,{forwardRef}from'react';import{useSliderState}from'@react-stately/slider';import{useLayout}from\"../../../hooks\";import{usePropsResolution}from\"../../../hooks\";import Box from\"../Box\";import{SliderContext}from\"./Context\";import{useSlider}from'@react-native-aria/slider';import{useHasResponsiveProps}from\"../../../hooks/useHasResponsiveProps\";function Slider(_ref,ref){var isDisabled=_ref.isDisabled,isReadOnly=_ref.isReadOnly,props=_objectWithoutProperties(_ref,_excluded);var _props$accessibilityL;var newProps=_objectSpread(_objectSpread({},props),{},{'aria-label':(_props$accessibilityL=props.accessibilityLabel)!==null&&_props$accessibilityL!==void 0?_props$accessibilityL:'Slider'});if(typeof props.value==='number'){newProps.value=[props.value];}if(typeof props.defaultValue==='number'){newProps.defaultValue=[props.defaultValue];}props=newProps;var _useLayout=useLayout(),onLayout=_useLayout.onLayout,trackLayout=_useLayout.layout;var updatedProps=_extends2({},props);if(isReadOnly||isDisabled){updatedProps.isDisabled=true;}var state=useSliderState(_objectSpread(_objectSpread({},updatedProps),{},{numberFormatter:{format:function format(e){return e;}},minValue:props.minValue,maxValue:props.maxValue,onChange:function onChange(val){props.onChange&&props.onChange(val[0]);},onChangeEnd:function onChangeEnd(val){props.onChangeEnd&&props.onChangeEnd(val[0]);}}));var resolvedProps=usePropsResolution('Slider',props,{isDisabled:isDisabled,isReadOnly:isReadOnly});var _useSlider=useSlider(props,state,trackLayout),trackProps=_useSlider.trackProps;var contextValue=React.useMemo(function(){return{trackLayout:trackLayout,state:state,orientation:props.orientation,isDisabled:isDisabled,isReversed:props.isReversed,colorScheme:props.colorScheme,trackProps:trackProps,isReadOnly:isReadOnly,onTrackLayout:onLayout,thumbSize:resolvedProps.thumbSize,sliderSize:resolvedProps.sliderTrackHeight,_interactionBox:resolvedProps._interactionBox};},[trackLayout,state,props.orientation,isDisabled,props.isReversed,props.colorScheme,isReadOnly,onLayout,resolvedProps.thumbSize,resolvedProps.sliderTrackHeight]);if(useHasResponsiveProps(props)){return null;}return React.createElement(SliderContext.Provider,{value:contextValue},React.createElement(Box,_extends({},resolvedProps,{ref:ref}),React.Children.map(props.children,function(child,index){if(child.displayName==='SliderThumb'){return React.cloneElement(child,{index:index});}return child;})));}export default forwardRef(Slider);","map":{"version":3,"sources":["Slider.tsx"],"names":["props","newProps","layout","trackLayout","useLayout","updatedProps","Object","isReadOnly","state","useSliderState","numberFormatter","format","e","minValue","maxValue","onChange","val","onChangeEnd","resolvedProps","usePropsResolution","isDisabled","trackProps","useSlider","contextValue","orientation","isReversed","colorScheme","onTrackLayout","thumbSize","sliderSize","_interactionBox","useHasResponsiveProps","ref","child","index","forwardRef"],"mappings":"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","sourcesContent":["import React, { forwardRef } from 'react';\nimport { useSliderState } from '@react-stately/slider';\nimport { useLayout } from '../../../hooks';\nimport { usePropsResolution } from '../../../hooks';\nimport type { ISliderProps } from './types';\nimport Box from '../Box';\nimport { SliderContext } from './Context';\nimport { useSlider } from '@react-native-aria/slider';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\n\nfunction Slider({ isDisabled, isReadOnly, ...props }: ISliderProps, ref?: any) {\n  const newProps = {\n    ...props,\n    'aria-label': props.accessibilityLabel ?? 'Slider',\n  };\n\n  if (typeof props.value === 'number') {\n    //@ts-ignore - React Native Aria slider accepts array of values\n    newProps.value = [props.value];\n  }\n\n  if (typeof props.defaultValue === 'number') {\n    //@ts-ignore - React Native Aria slider accepts array of values\n    newProps.defaultValue = [props.defaultValue];\n  }\n\n  props = newProps;\n\n  const { onLayout, layout: trackLayout } = useLayout();\n  const updatedProps: ISliderProps = Object.assign({}, props);\n\n  if (isReadOnly || isDisabled) {\n    updatedProps.isDisabled = true;\n  }\n\n  const state = useSliderState({\n    ...updatedProps,\n    //@ts-ignore\n    numberFormatter: { format: (e) => e },\n    minValue: props.minValue,\n    maxValue: props.maxValue,\n    onChange: (val: any) => {\n      props.onChange && props.onChange(val[0]);\n    },\n    onChangeEnd: (val: any) => {\n      props.onChangeEnd && props.onChangeEnd(val[0]);\n    },\n  });\n\n  const resolvedProps = usePropsResolution('Slider', props, {\n    isDisabled,\n    isReadOnly,\n  });\n\n  const { trackProps } = useSlider(\n    (props as unknown) as any,\n    state,\n    trackLayout\n  );\n\n  const contextValue = React.useMemo(() => {\n    return {\n      trackLayout,\n      state,\n      orientation: props.orientation,\n      isDisabled: isDisabled,\n      isReversed: props.isReversed,\n      colorScheme: props.colorScheme,\n      trackProps,\n      isReadOnly: isReadOnly,\n      onTrackLayout: onLayout,\n      thumbSize: resolvedProps.thumbSize,\n      sliderSize: resolvedProps.sliderTrackHeight,\n      _interactionBox: resolvedProps._interactionBox,\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    trackLayout,\n    state,\n    props.orientation,\n    isDisabled,\n    props.isReversed,\n    props.colorScheme,\n    isReadOnly,\n    onLayout,\n    resolvedProps.thumbSize,\n    resolvedProps.sliderTrackHeight,\n  ]);\n\n  //TODO: refactor for responsive prop\n  if (useHasResponsiveProps(props)) {\n    return null;\n  }\n\n  return (\n    <SliderContext.Provider value={contextValue}>\n      <Box {...resolvedProps} ref={ref}>\n        {React.Children.map(props.children, (child, index) => {\n          if (child.displayName === 'SliderThumb') {\n            return React.cloneElement(child as React.ReactElement, {\n              index,\n            });\n          }\n\n          return child;\n        })}\n      </Box>\n    </SliderContext.Provider>\n  );\n}\n\nexport default forwardRef(Slider);\n"]},"metadata":{},"sourceType":"module"}